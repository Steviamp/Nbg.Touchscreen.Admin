@attribute [Authorize]
@page "/"
@using Microsoft.AspNetCore.Authorization
@using MudBlazor
@inject NavigationManager Nav

<MudContainer MaxWidth="MaxWidth.False" Class="mt-6">
    <MudText Typo="Typo.h4" Align="Align.Center" Class="mb-6">Welcome to Mellon Queueing System</MudText>

    <MudGrid Gutter="3">
        @foreach (var card in Cards)
        {
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Elevation="2" 
                          Class="card-root" 
                          Style="height:100%;"
                          OnClick="() => NavigateTo(card.Route)">
                        <div class="card-top" style="display:flex; flex-direction:column; align-items:center; justify-content:center; padding:16px;">
                            @if (!string.IsNullOrWhiteSpace(card.Image))
                            {
                                <MudImage Src="@($"images/{card.Image}")"
                                          Alt="@card.Title"
                                          Style="width:96px; height:96px; object-fit:contain; margin-bottom:8px;" />
                            }
                        </div>
                    <div class="card-row" style="display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px; padding:12px 0 16px 0;">
                        <MudText Typo="Typo.h6">@card.Title</MudText>
                        <MudButton Variant="Variant.Filled"
                                   Size="Size.Small"
                                   Class="ml-3"
                                   OnClick="@((MouseEventArgs _) => NavigateTo(card.Route))">
                            View More
                        </MudButton>
                    </div>
                    
                </MudPaper>
            </MudItem>
        }
    </MudGrid>
</MudContainer>

@code {
    record CardModel(string Title, string Route, string? Image = null);

    private readonly CardModel[] Cards = new[]
    {
        new CardModel("System Users", "/system-users", "michaelangelo.png"),
        new CardModel("NemoQ Users", "/nemoq-users", "leonardo.png"),
        //new CardModel("TouchScreen", "/touchscreen", "kiosk.png"),
        //new CardModel("Statistics",  "/statistics", "insight.png"),
        new CardModel("Pharmacies", "/pharmacies", "pharmacy.png"),
        new CardModel("Services", "/services", "services.png"),
        new CardModel("Queues", "/queues", "queue.png"),
        new CardModel("Settings", "/settings", "settings.png"),
        new CardModel("Logs", "/logs", "log-file.png"),
    };

    void NavigateTo(string route)
    {
        Nav.NavigateTo(route);
    }
}

